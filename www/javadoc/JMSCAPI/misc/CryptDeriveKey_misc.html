<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="ru">
<head>
<!-- Generated by javadoc (version 1.7.0_03) on Sun Apr 29 01:09:42 MAGT 2012 -->
<title>CryptDeriveKey_misc</title>
<meta name="date" content="2012-04-29">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="CryptDeriveKey_misc";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/CryptDeriveKey_misc.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-files/index-1.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../JMSCAPI/misc/CryptCreateHash_misc.html" title="interface in JMSCAPI.misc"><span class="strong">Prev Class</span></a></li>
<li><a href="../../JMSCAPI/misc/CryptDestroyHash_misc.html" title="interface in JMSCAPI.misc"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?JMSCAPI/misc/CryptDeriveKey_misc.html" target="_top">Frames</a></li>
<li><a href="CryptDeriveKey_misc.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li>Method</li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li>Method</li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">JMSCAPI.misc</div>
<h2 title="Interface CryptDeriveKey_misc" class="title">Interface CryptDeriveKey_misc</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Superinterfaces:</dt>
<dd><a href="../../JMSCAPI/misc/KeyFlags.html" title="interface in JMSCAPI.misc">KeyFlags</a></dd>
</dl>
<hr>
<br>
<pre>public interface <span class="strong">CryptDeriveKey_misc</span>
extends <a href="../../JMSCAPI/misc/KeyFlags.html" title="interface in JMSCAPI.misc">KeyFlags</a></pre>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../JMSCAPI/misc/CryptDeriveKey_misc.html#dwFlags">dwFlags</a></strong></code>
<div class="block">Possible dwFlags:
 
 <a href="../../JMSCAPI/misc/KeyFlags.html#CRYPT_CREATE_SALT"><code>CRYPT_CREATE_SALT</code></a>
 <a href="../../JMSCAPI/misc/KeyFlags.html#CRYPT_EXPORTABLE"><code>CRYPT_EXPORTABLE</code></a>
 <a href="../../JMSCAPI/misc/KeyFlags.html#CRYPT_NO_SALT"><code>CRYPT_NO_SALT</code></a>
 <a href="../../JMSCAPI/misc/KeyFlags.html#CRYPT_UPDATE_KEY"><code>CRYPT_UPDATE_KEY</code></a>
 
 </div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../JMSCAPI/misc/CryptDeriveKey_misc.html#error_codes">error_codes</a></strong></code>
<div class="block">The error codes prefaced by NTE are generated by the particular CSP being used.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../JMSCAPI/misc/CryptDeriveKey_misc.html#remarks">remarks</a></strong></code>
<div class="block"><b>Remarks</b>
 
 When keys are generated for symmetric block ciphers, the key by default is set up in
 cipher block chaining (CBC) mode with an initialization vector of zero.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="fields_inherited_from_class_JMSCAPI.misc.KeyFlags">
<!--   -->
</a>
<h3>Fields inherited from interface&nbsp;JMSCAPI.misc.<a href="../../JMSCAPI/misc/KeyFlags.html" title="interface in JMSCAPI.misc">KeyFlags</a></h3>
<code><a href="../../JMSCAPI/misc/KeyFlags.html#CRYPT_ARCHIVABLE">CRYPT_ARCHIVABLE</a>, <a href="../../JMSCAPI/misc/KeyFlags.html#CRYPT_CREATE_SALT">CRYPT_CREATE_SALT</a>, <a href="../../JMSCAPI/misc/KeyFlags.html#CRYPT_EXPORTABLE">CRYPT_EXPORTABLE</a>, <a href="../../JMSCAPI/misc/KeyFlags.html#CRYPT_FORCE_KEY_PROTECTION_HIGH">CRYPT_FORCE_KEY_PROTECTION_HIGH</a>, <a href="../../JMSCAPI/misc/KeyFlags.html#CRYPT_NO_SALT">CRYPT_NO_SALT</a>, <a href="../../JMSCAPI/misc/KeyFlags.html#CRYPT_PREGEN">CRYPT_PREGEN</a>, <a href="../../JMSCAPI/misc/KeyFlags.html#CRYPT_UPDATE_KEY">CRYPT_UPDATE_KEY</a>, <a href="../../JMSCAPI/misc/KeyFlags.html#CRYPT_USER_PROTECTED">CRYPT_USER_PROTECTED</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="dwFlags">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dwFlags</h4>
<pre>static final&nbsp;java.lang.String dwFlags</pre>
<div class="block">Possible dwFlags:<ul>
 
 <li><a href="../../JMSCAPI/misc/KeyFlags.html#CRYPT_CREATE_SALT"><code>CRYPT_CREATE_SALT</code></a></li>
 <li><a href="../../JMSCAPI/misc/KeyFlags.html#CRYPT_EXPORTABLE"><code>CRYPT_EXPORTABLE</code></a></li>
 <li><a href="../../JMSCAPI/misc/KeyFlags.html#CRYPT_NO_SALT"><code>CRYPT_NO_SALT</code></a></li>
 <li><a href="../../JMSCAPI/misc/KeyFlags.html#CRYPT_UPDATE_KEY"><code>CRYPT_UPDATE_KEY</code></a></li>
 
 </ul></div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../constant-values.html#JMSCAPI.misc.CryptDeriveKey_misc.dwFlags">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="error_codes">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>error_codes</h4>
<pre>static final&nbsp;java.lang.String error_codes</pre>
<div class="block">The error codes prefaced by NTE are generated by the particular CSP being used.
 Some possible error codes returned by <b>GetLastError()</b>:
                                                                                                                                                                                                                </p><table><tr>
<td>ERROR_INVALID_HANDLE</td>                   <td>One of the parameters specifies a handle that is
                                                                                        not valid.                                                                                                      </td></tr><tr>

<td>ERROR_INVALID_PARAMETER = 87</td>   <td>One of the parameters contains a value that is not
                                                                                valid. This is most often a pointer that is not valid.                  </td></tr><tr>
 
<td>NTE_BAD_ALGID</td>                          <td>The <code>Algid</code> parameter specifies an algorithm
                                                                                        that this CSP does not support.                                                         </td></tr><tr>

<td>NTE_BAD_FLAGS</td>                          <td>The <code>dwFlags</code> parameter contains a value
                                                                                        that is not valid.                                                                                      </td></tr><tr>

<td>NTE_BAD_HASH</td>                                   <td>The hash object specified by the <code>hBaseData</code>
                                                                                        parameter is not valid.                                                                         </td></tr><tr>

<td>NTE_BAD_HASH_STATE</td>                     <td>An attempt was made to add data to a hash object that
                                                                                        is already marked "finished."                                                           </td></tr><tr>

<td>NTE_BAD_UID</td>                                    <td>The <code>hProv</code> parameter does not contain
                                                                                        a valid context handle.                                                                         </td></tr><tr>

<td>NTE_FAIL</td>                                               <td>The function failed in some unexpected way.                                 </td></tr><tr>

<td>NTE_SILENT_CONTEXT</td>                     <td>The provider could not perform the action because
                                                                                        the context was acquired as silent.                                                     </td></tr>
                                                                                                                                                                                                                </table></div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../constant-values.html#JMSCAPI.misc.CryptDeriveKey_misc.error_codes">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="remarks">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>remarks</h4>
<pre>static final&nbsp;java.lang.String remarks</pre>
<div class="block"><b>Remarks</b><p>
 
 When keys are generated for symmetric block ciphers, the key by default is set up in
 cipher block chaining (CBC) mode with an initialization vector of zero. This cipher mode
 provides a good default method for bulk-encrypting data. To change these parameters, use
 the <b>CryptSetKeyParam</b> function.
 <p>
 The <b>CryptDeriveKey</b> function completes the hash. After CryptDeriveKey has been called,
 no more data can be added to the hash. Additional calls to                                                                                     <a href="../../JMSCAPI/Advapi32.html#CryptHashData(JMSCAPI.misc.JMSCAPI_misc.HCRYPTHASH, com.sun.jna.Pointer, int, int)"><code>CryptHashData</code></a> or <b>CryptHashSessionKey</b> fail. After the application is done with the
 hash, <a href="../../JMSCAPI/Advapi32.html#CryptDestroyHash(JMSCAPI.misc.JMSCAPI_misc.HCRYPTHASH)"><code>CryptDestroyHash</code></a> must be called to destroy
 the hash object.
 <p>
 To choose an appropriate key length, the following methods are recommended.
 <ul><li>
 To enumerate the algorithms that the CSP supports and to get maximum and minimum key
 lengths for each algorithm, call <a href="../../JMSCAPI/Advapi32.html#CryptGetProvParam(JMSCAPI.misc.JMSCAPI_misc.HCRYPTPROV, int, com.sun.jna.Pointer, com.sun.jna.ptr.IntByReference, int)"><code>CryptGetProvParam</code></a>
 with <code>PP_ENUMALGS_EX</code>.</li>
 <li>
 Use the minimum and maximum lengths to choose an appropriate key length. It is not always
 advisable to choose the maximum length because this can lead to performance issues.</li>
 <li>
 After the desired key length has been chosen, use the upper 16 bits of the <code>dwFlags</code>
 parameter to specify the key length.</li></ul>
 
 Let <b>n</b> be the required derived key length, in bytes. The derived key is the first <b>n</b>
 bytes of the hash value after the hash computation has been completed by <b>CryptDeriveKey</b>.
 If the hash is not a member of the SHA-2 family and the required key is for either 3DES or
 AES, the key is derived as follows:
 <ol><li>
 Form a 64-byte buffer by repeating the constant <b>0x36</b> 64 times. Let <b>k</b> be the
 length of the hash value that is represented by the input parameter <code>hBaseData</code>.
 Set the first <b>k</b> bytes of the buffer to the result of an XOR operation of the first
 <b>k</b> bytes of the buffer with the hash value that is represented by the input parameter
 <code>hBaseData</code>.                                                </li>
 <li>
 Form a 64-byte buffer by repeating the constant <b>0x5C</b> 64 times. Set the first <b>k</b>
 bytes of the buffer to the result of an XOR operation of the first <b>k</b> bytes of the
 buffer with the hash value that is represented by the input parameter <code>hBaseData</code>.  </li>
 <li>
 Hash the result of step 1 by using the same hash algorithm as that used to compute the hash
 value that is represented by the <code>hBaseData</code> parameter.</li>
 <li>
 Hash the result of step 2 by using the same hash algorithm as that used to compute the hash
 value that is represented by the <code>hBaseData</code> parameter.</li>
 <li>
 Concatenate the result of step 3 with the result of step 4.</li>
 <li>
 Use the first <b>n</b> bytes of the result of step 5 as the derived key.</li></ol></div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../constant-values.html#JMSCAPI.misc.CryptDeriveKey_misc.remarks">Constant Field Values</a></dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/CryptDeriveKey_misc.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-files/index-1.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../JMSCAPI/misc/CryptCreateHash_misc.html" title="interface in JMSCAPI.misc"><span class="strong">Prev Class</span></a></li>
<li><a href="../../JMSCAPI/misc/CryptDestroyHash_misc.html" title="interface in JMSCAPI.misc"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?JMSCAPI/misc/CryptDeriveKey_misc.html" target="_top">Frames</a></li>
<li><a href="CryptDeriveKey_misc.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li>Method</li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li>Method</li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
